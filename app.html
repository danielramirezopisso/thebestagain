<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>The Best Again — Add / List</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body onload="initApp()">
  <header class="topbar">
    <div class="brand">The Best Again</div>
    <nav class="nav">
      <a href="index.html">Home</a>
      <a class="active" href="app.html">Add / List</a>
      <a href="map.html">Map</a>
    </nav>
  </header>

  <main class="container">
    <h1>Add & List markers</h1>
    <p class="muted">Release 1 — rating 1–10, manual lat/lon, filters.</p>

    <section class="card">
      <h2>Add marker</h2>

      <label>Title</label>
      <input id="title" placeholder="e.g., Pizza at Da Nino / Nuggets Brand X" />

      <div style="display:flex; gap:12px;">
        <div style="flex:1;">
          <label>Group</label>
          <select id="group_type">
            <option value="place" selected>Bar / Restaurant (place)</option>
            <option value="product">Supermarket product (product)</option>
          </select>
        </div>

        <div style="flex:1;">
          <label>Category</label>
          <select id="category"></select>
        </div>

        <div style="flex:1;">
          <label>Rating (1–10)</label>
          <select id="rating"></select>
        </div>
      </div>

      <label>Address (optional)</label>
      <input id="address" placeholder="e.g., Calle de Atocha 12, Madrid" />

      <div style="display:flex; gap:12px;">
        <div style="flex:1;">
          <label>Lat (optional)</label>
          <input id="lat" placeholder="40.4168" />
        </div>
        <div style="flex:1;">
          <label>Lon (optional)</label>
          <input id="lon" placeholder="-3.7038" />
        </div>
      </div>

      <button onclick="createMarker()">Save marker</button>
      <span id="status" class="muted" style="margin-left:10px;"></span>
    </section>

    <section class="card">
      <h2 style="margin-top:0;">Markers</h2>

      <!-- Filters -->
      <div style="display:flex; gap:12px; align-items:end; margin-bottom:12px;">
        <div style="flex:1;">
          <label>Filter: Group</label>
          <select id="filter_group">
            <option value="">All</option>
            <option value="place">place</option>
            <option value="product">product</option>
          </select>
        </div>

        <div style="flex:2;">
          <label>Filter: Category</label>
          <select id="filter_category">
            <option value="">All</option>
          </select>
        </div>

        <div>
          <button onclick="loadMarkers()">Apply filters</button>
        </div>
      </div>

      <div id="markers" class="muted">Loading…</div>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="app.js"></script>
</body>
</html>
